<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <!--

        EVERYTHING IS PHYSICAL 
        EVERYTHING IS FRACTAL
        EVERYTHING IS RECURSIVE
        NO MONEY 
        MO MINING 
        NO PROPERTY
        LOOK AT THE INSECTS
        LOOK AT THE FUNGI
        LANGUAGE IS HOW THE MIND PARSES REALITY

    -->
        <title>classical noise response Plots</title>

<link href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAZ4efAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEREREREREREREREREREREREAAAAAAAAREQEREREREBERAREREREQEREBEAAAARAREQEQEREBEBERARAQAQEQEREBEBABARAREQEQEREBEBERARAAAAEQEREBERERERAREQEREREREBERAAAAAAAAEREREREREREREREREREREREAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" rel="icon" type="image/x-icon">


    <!--Stop Google:-->
    <META NAME="robots" CONTENT="noindex,nofollow">
<!--geometron javascript library-->
    <script src="https://cdn.jsdelivr.net/npm/p5@1.7.0/lib/p5.js"></script>
    <script src = "https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/addons/p5.sound.js"></script>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script>
            MathJax.Hub.Config({
                tex2jax: {
                inlineMath: [['$','$'], ['\\(','\\)']],
                processEscapes: true,
                processClass: "mathjax",
                ignoreClass: "no-mathjax"
                }
            });//			MathJax.Hub.Typeset();//tell Mathjax to update the math
        </script>

</head>
<body>


<div id = "feedscroll">
    
    <a href = "index.html">HOME</a>
    
    <h1>Quantum response graph</h1>
    
        <h1><a style = "color:blue;text-align:center;margin:auto" href = "user.php?scroll=scrolls/p5js">p5js Scroll</a></h1>
        
    <p>
        this page doesn't work on mobile. hit the letter "s" to post a square to the feed. move pointer around on square to change the paramters of the curve.
    </p>
    
    <p>
Ramp of sine amplitude goes up across the square, and this is the response. the equation is
    </p>
    <p>
        $$
        \frac{1}{2}\left(\frac{v + \phi}{2}\right)\coth{\left(\frac{v + \phi}{2T}\right)} + \frac{1}{2}\left(\frac{v - \phi}{2}\right)\coth{\left(\frac{v - \phi}{2T}\right)}
        $$
    </p>
    
    <p>
        T is the temperature in pixels, which is set by the Y position of the mouse.  The x position sets the period of the bias sweep. The amplitude of the bias sweep is set by the size of the square, and goes up to twice that, which is what puts the top of the shot noise right at the top corner of the square.
    </p>


</div>

<script>

margin = 100;//margin in px
squaretime = 0;
v = 0;
period = 50;//period of cosine in pixels
tpixels = 100;//temperature in pixels
graphsize = 100;
phi = 1;//frequency in pixels


if(innerWidth > innerHeight){
    squaresize = innerHeight - 50;
    document.getElementById("feedscroll").style.right =  squaresize.toString()+ "px";    
}
else{
    squaresize = innerWidth - 50;
    
    document.getElementById("feedscroll").style.right =  "0px";    
    document.getElementById("feedscroll").style.top = squaresize.toString() + "px";
}

graphsize = squaresize- 2*margin;

tpixels= graphsize/50;

function setup() {

  createCanvas(squaresize, squaresize);    
   strokeWeight(2);  
   background("#F8F0E3");
    
}



function draw(){

clear();
  strokeWeight(6);
  noFill();
  stroke("blue");
  beginShape();
  period = mouseX/4;
  period = 60;
  phi = (squaresize - margin - mouseY);
  phi = (0.5*squaresize - margin);
  
  for (var squaretime = 0; squaretime < graphsize; squaretime++)  {
      v = squaretime*Math.cos(2*Math.PI*squaretime/period);

      p = (0.5*(v + phi))/Math.tanh(0.5*(v + phi)/tpixels) + (0.5*(v - phi))/Math.tanh(0.5*(v - phi)/tpixels);
      
      vertex(margin + squaretime, margin + graphsize - p);
  }
  endShape();
  stroke("black");


  rect(margin, margin,graphsize,graphsize);
  

  strokeWeight(1);
    line(margin,graphsize + margin - phi,margin+graphsize,graphsize + margin - phi);
  textSize(32);
//  text("-V_max",margin-32,margin+graphsize+32);
  text("1",margin-32,graphsize + margin - phi);
  text("p_max/frequency",margin-32,margin-32);
  text("sweep time",graphsize-32,margin+graphsize+32);

    
}




function post(){
            
    png64 = document.getElementById("defaultCanvas0").toDataURL("image/png");
    var timestamp = Math.round((new Date().getTime())/1000).toString();
    var httpc = new XMLHttpRequest();
    var url = "pngsave.php";        
    httpc.open("POST", url, true);
    httpc.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
    httpc.send("data="+encodeURIComponent(png64.substring(22))+"&filename=trashmagic/square" + timestamp +  "-sweep.png");//send text to filesaver.php
     //location.reload(); 
     
    newfilename = "trashmagic/square" + timestamp +  "-sweep.png";
    
    var newbox = document.createElement("DIV");
    newbox.classList.add("imagebox");         
    
    var deletespan = document.createElement("SPAN");
    deletespan.innerHTML = "X";
    deletespan.classList.add("deletespan");
    deletespan.onclick = function(){
        //delete the parent div of the image
        //delete the file
        var filename = this.parentElement.getElementsByClassName("filelabel")[0].innerHTML; 
        var httpc = new XMLHttpRequest();
        var url = "deletefile.php";         
        httpc.open("POST", url, true);
        httpc.setRequestHeader("Content-Type", "application/x-www-form-urlencoded;charset=utf-8");
        httpc.send("filename=trashmagic/" + filename);//send text to deletefile.php
        this.parentElement.parentElement.removeChild(this.parentElement);
    }
    
    newbox.appendChild(deletespan);

    var newdiv = document.createElement("DIV");
    newdiv.innerHTML = newfilename;
    newdiv.className = "filelabel";
    newbox.appendChild(newdiv);

    var newimg = document.createElement("IMG");
    newimg.src = png64;
    newimg.classList.add("uploadimage");
    newimg.classList.add("button");
    newbox.appendChild(newimg);    


    document.getElementById("feedscroll").insertBefore(newbox,document.getElementById("feedscroll").getElementsByClassName("imagebox")[0]);
        
}

function keyPressed() {

    if(key == 's'){
        post();
    }

}


upuploadImages = [];
var httpc9 = new XMLHttpRequest();
    httpc9.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
        upuploadImages = JSON.parse(this.responseText);
        for(var index = upuploadImages.length - 1;index >= 0;index--) {
            
            if(upuploadImages[index].includes("-sweep")){
            
                var newbox = document.createElement("DIV");
                newbox.classList.add("imagebox");         
                
                var deletespan = document.createElement("SPAN");
                deletespan.innerHTML = "X";
                deletespan.classList.add("deletespan");
                deletespan.onclick = function(){
                    //delete the parent div of the image
                    //delete the file
                    var filename = this.parentElement.getElementsByClassName("filelabel")[0].innerHTML; 
                    var httpc = new XMLHttpRequest();
                    var url = "deletefile.php";         
                    httpc.open("POST", url, true);
                    httpc.setRequestHeader("Content-Type", "application/x-www-form-urlencoded;charset=utf-8");
                    httpc.send("filename=trashmagic/" + filename);//send text to deletefile.php
                    this.parentElement.parentElement.removeChild(this.parentElement);
                }
                
                newbox.appendChild(deletespan);
        
                var newdiv = document.createElement("DIV");
                newdiv.innerHTML = upuploadImages[index];
                newdiv.className = "filelabel";
                newbox.appendChild(newdiv);
            
                
                document.getElementById("feedscroll").appendChild(newbox);
                var newimg = document.createElement("IMG");
                newimg.src = "trashmagic/" + upuploadImages[index];
                newimg.classList.add("uploadimage");
                newimg.classList.add("button");
                newbox.appendChild(newimg);
                
            }
            
        }
    }
};
httpc9.open("GET", "dir.php?filename=trashmagic", true);
httpc9.send();


</script>
<style>
body{
    overflow:hidden;
    background-color:#F8F0E3;
    font-family:Arial;
}
main{
    position:absolute;
    right:25px;
    top:25px;
    border-left:solid;
    border-width:10px
}


#feedscroll img{
    max-width:80%;
    display:block;
    margin:auto;
    margin-top:1em;
    border:solid;
}

p{
    margin:1em 1em 1em 1em;
    font-size:1.5em;
    font-family:Arial;
    overflow:scroll;
}
h1,h2,h3{
    font-family:Arial;
    text-align:center;
    overflow:scroll;

}
a{
    color:blue;
    font-family:Arial;
    font-size:1.5em;    
    overflow:scroll;
}
#feedscroll{
    position:absolute;
    left:0px;
    bottom:0px;
    top:6em;
    z-index:-2;
    overflow:scroll;
    background-color:#F8F0E3; 
    padding:1em 1em 1em 1em;
}
.deletespan{
    color:red;
    border:solid;
    border-color:red;
    border-radius:0.5em;
    padding: 1em 1em 1em 1em;
    cursor:pointer;
}
.deletespan:hover{
    background-color:#ff000080;
}
.filelabel{
    display:none;
}
.button{
    cursor:pointer;
}
.button:hover{
    background-color:green;
}
.button:active{
    background-color:yellow;
}
.data{
    display:none;
}
</style>
</body>
</html>